[
  {
    "version": 2,
    "builds": [
      {
        "src": "src/main.ts",
        "use": "@vercel/node"
      }
    ],
    "routes": [
      {
        "src": "/(.*)",
        "dest": "src/main.ts",
        "methods": ["GET", "POST", "PUT", "DELETE"]
      }
    ]
  },
  {
    "functions": {
      "api/**/*.js": {
        "maxDuration": 60
      }
    },
    "routes": [
      {
        "src": "/(.*)",
        "dest": "dist/main.js",
        "methods": ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"]
      }
    ]
  },

  {
    "$schema": "https://json.schemastore.org/nest-cli",
    "collection": "@nestjs/schematics",
    "sourceRoot": "src",
    "compilerOptions": {
      "deleteOutDir": true,
      "assets": ["templates/**/*"],
      "watchAssets": true,
      "webpack": true,
      "tsConfigPath": "tsconfig.build.json",
      "builder": {
        "options": {
          "outputPath": "api"
        }
      }
    }
  }
]
